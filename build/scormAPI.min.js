/*! simplify-scorm v1.0.1 - 2018-04-09 */
window.simplifyScorm={},window.simplifyScorm.constants={SCORM_TRUE:"true",SCORM_FALSE:"false",STATE_NOT_INITIALIZED:0,STATE_INITIALIZED:1,STATE_TERMINATED:2,LOG_LEVEL_DEBUG:1,LOG_LEVEL_INFO:2,LOG_LEVEL_WARNING:3,LOG_LEVEL_ERROR:4,LOG_LEVEL_NONE:5},window.simplifyScorm.jsonFormatter=function t(){this.jsonString=!0,delete this.toJSON;var e=JSON.stringify(this);this.toJSON=t,this.jsonString=!1;var r=JSON.parse(e);for(var n in r)r.hasOwnProperty(n)&&0===n.indexOf("_")&&delete r[n];return delete r.jsonString,r},function(){window.simplifyScorm.BaseAPI=function(){var t=this;t.currentState=s.STATE_NOT_INITIALIZED,t.lastErrorCode=0,t.apiLog=e,t.apiLogLevel=s.LOG_LEVEL_ERROR,t.getLmsErrorMessageDetails=r,t.listenerArray=[],t.on=n,t.processListeners=i,t.throwSCORMError=o};var s=window.simplifyScorm.constants;function e(t,e,r,n){if(r=function(t,e,r){for(var n="",s=20-(n+=t).length,i=0;i<s;i++)n+=" ";if(n+=": ",e){s=70-(n+=e).length;for(var o=0;o<s;o++)n+=" "}r&&(n+=r);return n}(t,e,r),n>=this.apiLogLevel)switch(n){case s.LOG_LEVEL_ERROR:console.error(r);break;case s.LOG_LEVEL_WARNING:console.warn(r);break;case s.LOG_LEVEL_INFO:console.info(r)}}function r(t,e){return"No error"}function n(t,e){if(e){var r=t.split(".");if(0!==r.length){var n=r[0],s=null;1<r.length&&(s=t.replace(n+".","")),this.listenerArray.push({functionName:n,CMIElement:s,callback:e})}}}function i(t,e,r){for(var n=0;n<this.listenerArray.length;n++){var s=this.listenerArray[n];s.functionName===t&&(s.CMIElement&&s.CMIElement,s.callback(e,r))}}function o(t,e){e||(e=this.getLmsErrorMessageDetails(t)),this.apiLog("throwSCORMError",null,t+": "+e,s.LOG_LEVEL_ERROR),this.lastErrorCode=String(t)}}(),function(){var t=window.simplifyScorm.BaseAPI,h=window.simplifyScorm.constants,r=window.simplifyScorm.jsonFormatter;function e(e){return{jsonString:!1,_suspend_data:"",get suspend_data(){return this._suspend_data},set suspend_data(t){this._suspend_data=t},_launch_data:"",get launch_data(){return this._launch_data},set launch_data(t){e.currentState!==h.STATE_INITIALIZED?this._launch_data=t:e.throwSCORMError(403)},_comments:"",get comments(){return this._comments},set comments(t){this._comments=t},_comments_from_lms:"",get comments_from_lms(){return this._comments_from_lms},set comments_from_lms(t){e.currentState!==h.STATE_INITIALIZED?this._comments_from_lms=t:e.throwSCORMError(403)},core:{jsonString:!1,__children:"student_id, student_name, lesson_location, credit, lesson_status, entry, score, total_time, lesson_mode, exit, session_time",get _children(){return this.__children},set _children(t){e.throwSCORMError(402)},_student_id:"",get student_id(){return this._student_id},set student_id(t){e.currentState!==h.STATE_INITIALIZED?this._student_id=t:e.throwSCORMError(403)},_student_name:"",get student_name(){return this._student_name},set student_name(t){e.currentState!==h.STATE_INITIALIZED?this._student_name=t:e.throwSCORMError(403)},_lesson_location:"",get lesson_location(){return this._lesson_location},set lesson_location(t){this._lesson_location=t},_credit:"",get credit(){return this._credit},set credit(t){e.currentState!==h.STATE_INITIALIZED?this._credit=t:e.throwSCORMError(403)},_lesson_status:"",get lesson_status(){return this._lesson_status},set lesson_status(t){this._lesson_status=t},_entry:"",get entry(){return this._entry},set entry(t){e.currentState!==h.STATE_INITIALIZED?this._entry=t:e.throwSCORMError(403)},_total_time:"",get total_time(){return this._total_time},set total_time(t){e.currentState!==h.STATE_INITIALIZED?this._total_time=t:e.throwSCORMError(403)},_lesson_mode:"normal",get lesson_mode(){return this._lesson_mode},set lesson_mode(t){e.currentState!==h.STATE_INITIALIZED?this._lesson_mode=t:e.throwSCORMError(403)},_exit:"",get exit(){return this.jsonString?this._exit:e.throwSCORMError(404)},set exit(t){this._exit=t},_session_time:"",get session_time(){return this.jsonString?this._session_time:e.throwSCORMError(404)},set session_time(t){this._session_time=t},score:{__children:"raw,min,max",get _children(){return this.__children},set _children(t){e.throwSCORMError(402)},_raw:"",get raw(){return this._raw},set raw(t){this._raw=t},_max:"100",get max(){return this._max},set max(t){this._max=t},_min:"",get min(){return this._min},set min(t){this._min=t},toJSON:r},toJSON:r},objectives:{__children:"id,score,status",get _children(){return this.__children},set _children(t){e.throwSCORMError(402)},childArray:[],get _count(){return this.childArray.length},set _count(t){e.throwSCORMError(402)},toJSON:r},student_data:{__children:"mastery_score,max_time_allowed,time_limit_action",get _children(){return this.__children},set _children(t){e.throwSCORMError(402)},_mastery_score:"",get mastery_score(){return this._mastery_score},set mastery_score(t){e.currentState!==h.STATE_INITIALIZED?this._mastery_score=t:e.throwSCORMError(403)},_max_time_allowed:"",get max_time_allowed(){return this._max_time_allowed},set max_time_allowed(t){e.currentState!==h.STATE_INITIALIZED?this._max_time_allowed=t:e.throwSCORMError(403)},_time_limit_action:"",get time_limit_action(){return this._time_limit_action},set time_limit_action(t){e.currentState!==h.STATE_INITIALIZED?this._time_limit_action=t:e.throwSCORMError(403)},toJSON:r},student_preference:{__children:"language,speech,audio,speed,text",get _children(){return this.__children},set _children(t){e.throwSCORMError(402)},_audio:"",get audio(){return this._audio},set audio(t){this._audio=t},_language:"",get language(){return this._language},set language(t){this._language=t},_speed:"",get speed(){return this._speed},set speed(t){this._speed=t},_text:"",get text(){return this._text},set text(t){this._text=t},toJSON:r},interactions:{__children:"id,objectives,time,type,correct_responses,weighting,student_response,result,latency",get _children(){return this.__children},set _children(t){e.throwSCORMError(402)},childArray:[],get _count(){return this.childArray.length},set _count(t){e.throwSCORMError(402)},toJSON:r},toJSON:r}}function c(e){return{jsonString:!1,_id:"",get id(){return this.jsonString?this._id:e.throwSCORMError(404)},set id(t){this._id=t},_time:"",get time(){return this.jsonString?this._time:e.throwSCORMError(404)},set time(t){this._time=t},_type:"",get type(){return this.jsonString?this._type:e.throwSCORMError(404)},set type(t){this._type=t},_weighting:"",get weighting(){return this.jsonString?this._weighting:e.throwSCORMError(404)},set weighting(t){this._weighting=t},_student_response:"",get student_response(){return this.jsonString?this._student_response:e.throwSCORMError(404)},set student_response(t){this._student_response=t},_result:"",get result(){return this.jsonString?this._result:e.throwSCORMError(404)},set result(t){this._result=t},_latency:"",get latency(){return this.jsonString?this._latency:e.throwSCORMError(404)},set latency(t){this._latency=t},objectives:{childArray:[],get _count(){return this.childArray.length},set _count(t){e.throwSCORMError(402)},toJSON:r},correct_responses:{childArray:[],get _count(){return this.childArray.length},set _count(t){e.throwSCORMError(402)},toJSON:r},toJSON:r}}function u(e){return{_id:"",get id(){return this._id},set id(t){this._id=t},score:{__children:"raw,min,max",get _children(){return this.__children},set _children(t){e.throwSCORMError(402)},_raw:"",get raw(){return this._raw},set raw(t){this._raw=t},_max:"",get max(){return this._max},set max(t){this._max=t},_min:"",get min(){return this._min},set min(t){this._min=t},_status:"",get status(){return this._status},set status(t){this._status=t},toJSON:r},toJSON:r}}function d(t){return{jsonString:!1,_id:"",get id(){return this.jsonString?this._id:t.throwSCORMError(404)},set id(t){this._id=t},toJSON:r}}function m(t){return{jsonString:!1,_pattern:"",get pattern(){return this.jsonString?this._pattern:t.throwSCORMError(404)},set pattern(t){this._pattern=t},toJSON:r}}window.API=new function(){var l=this;return t.call(l),l.LMSInitialize=function(){var t=h.SCORM_FALSE;return l.currentState===h.STATE_INITIALIZED?l.throwSCORMError(101,"LMS was already initialized!"):(l.currentState=h.STATE_INITIALIZED,t=h.SCORM_TRUE,l.processListeners("LMSInitialize")),l.apiLog("LMSInitialize",null,"returned: "+t,h.LOG_LEVEL_INFO),t},l.LMSFinish=function(){var t=h.SCORM_FALSE;return l.checkState()&&(t=h.SCORM_TRUE,l.processListeners("LMSFinish")),l.apiLog("LMSFinish",null,"returned: "+t,h.LOG_LEVEL_INFO),t},l.LMSGetValue=function(t){var e="";return l.checkState()&&(e=function(t){if(!t||""===t)return"";for(var e=t.split("."),r=l,n=null,s=0;s<e.length;s++)n=e[s],s===e.length-1&&(r.hasOwnProperty(e[s])||l.throwSCORMError(101,"getCMIValue did not find a value for: "+t)),r=r[e[s]];return null==r?("_children"===n?l.throwSCORMError(202):"_count"===n&&l.throwSCORMError(203),""):r}(t),l.processListeners("LMSGetValue",t)),l.apiLog("LMSGetValue",t,": returned: "+e,h.LOG_LEVEL_INFO),e},l.LMSSetValue=function(t,e){return l.checkState()&&(function(t,e){if(!t||""===t)return h.SCORM_FALSE;for(var r=t.split("."),n=l,s=h.SCORM_FALSE,i=0;i<r.length;i++)if(i===r.length-1)n.hasOwnProperty(r[i])?(n[r[i]]=e,s=h.SCORM_TRUE):l.throwSCORMError(101,"setCMIValue did not find an element for: "+t);else if((n=n[r[i]]).hasOwnProperty("childArray")){var o=parseInt(r[i+1],10);if(!isNaN(o)){var a,_=n.childArray[o];_?n=_:(-1<t.indexOf("cmi.objectives")?a=new u(l):-1<t.indexOf(".correct_responses")?a=new m(l):-1<t.indexOf(".objectives")?a=new d(l):-1<t.indexOf("cmi.interactions")&&(a=new c(l)),a?(n.childArray.push(a),n=a):l.throwSCORMError(101,"Cannot create new sub entity: "+t)),i++}}s===h.SCORM_FALSE&&l.apiLog("There was an error setting the value for: "+t+", value of: "+e,h.LOG_LEVEL_WARNING)}(t,e),l.processListeners("LMSSetValue",t,e)),l.apiLog("LMSSetValue",t,": "+e+": result: ",h.LOG_LEVEL_INFO),""},l.LMSCommit=function(){var t=h.SCORM_FALSE;return l.checkState()&&(t=h.SCORM_TRUE,l.processListeners("LMSCommit")),l.apiLog("LMSCommit",null,"returned: "+t,h.LOG_LEVEL_INFO),t},l.LMSGetLastError=function(){var t=l.lastErrorCode;return l.processListeners("LMSGetLastError"),l.apiLog("LMSGetLastError",null,"returned: "+t,h.LOG_LEVEL_INFO),t},l.LMSGetErrorString=function(t){var e="";return null!==t&&""!==t&&(e=l.getLmsErrorMessageDetails(t),l.processListeners("LMSGetErrorString")),l.apiLog("LMSGetErrorString",null,"returned: "+e,h.LOG_LEVEL_INFO),e},l.LMSGetDiagnostic=function(t){var e="";return null!==t&&""!==t&&(e=l.getLmsErrorMessageDetails(t,!0),l.processListeners("LMSGetDiagnostic")),l.apiLog("LMSGetDiagnostic",null,"returned: "+e,h.LOG_LEVEL_INFO),e},l.cmi=new e(l),l.checkState=function(){return this.currentState===h.STATE_INITIALIZED||(this.throwSCORMError(301),!1)},l.getLmsErrorMessageDetails=function(t,e){var r="",n="";switch(t=String(t)){case"101":r="General Exception",n="No specific error code exists to describe the error. Use LMSGetDiagnostic for more information";break;case"201":r="Invalid argument error",n="Indicates that an argument represents an invalid data model element or is otherwise incorrect.";break;case"202":r="Element cannot have children",n='Indicates that LMSGetValue was called with a data model element name that ends in "_children" for a data model element that does not support the "_children" suffix.';break;case"203":r="Element not an array - cannot have count",n='Indicates that LMSGetValue was called with a data model element name that ends in "_count" for a data model element that does not support the "_count" suffix.';break;case"301":r="Not initialized",n="Indicates that an API call was made before the call to LMSInitialize.";break;case"401":r="Not implemented error",n="The data model element indicated in a call to LMSGetValue or LMSSetValue is valid, but was not implemented by this LMS. SCORM 1.2 defines a set of data model elements as being optional for an LMS to implement.";break;case"402":r="Invalid set value, element is a keyword",n='Indicates that LMSSetValue was called on a data model element that represents a keyword (elements that end in "_children" and "_count").';break;case"403":r="Element is read only",n="LMSSetValue was called with a data model element that can only be read.";break;case"404":r="Element is write only",n="LMSGetValue was called on a data model element that can only be written to.";break;case"405":r="Incorrect Data Type",n="LMSSetValue was called with a value that is not consistent with the data format of the supplied data model element.";break;default:n=r="No Error"}return e?n:r},l}}();